!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=e("./controllers/mainController.js"),a=r(o),i=angular.module("sb",["underscore","ngRoute","angularMoment"]);i.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode(!0)}]),i.controller("mainController",a["default"]),a["default"].$inject=["$http","$q","$timeout","$window","$interval","_","moment"]},{"./controllers/mainController.js":3}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),console.log("http: "),this.http=t,this.promises=n}return o(e,[{key:"post",value:function(e,t,n){var r=this;return this.promises(function(o,a){r.http({method:"POST",url:e,data:t,headers:n}).success(function(e){return o(e)}).error(function(e){return a(e)})})}},{key:"get",value:function(e){var t=this;return this.promises(function(n,r){t.http({method:"GET",url:e}).success(function(e){return n(e)}).error(function(e){return r(e)})})}}]),e}();n["default"]=a},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./../services/mainService.js"),u=r(i),s=function(){function e(t,n,r,a,i,s){var l=this;o(this,e),this.http=t,this.q=n,this.timeout=r,this.window=a,this.baseLanguage=localStorage.getItem("baseLanguage")||"en-US",console.log("base language: ",this.baseLanguage),this.service=new u["default"](t,n),this.mainLoadingDivText="ja-JP"===this.baseLanguage?"取得の設定 ...":"Getting Configurations ...",this.allDataLoaded=!1;var c=this;i(function(){c.timeZones=_.map(c.allTimeZones,function(e){return{name:e.key_text,time:c.getTimeZoneDate(e.key_text,e.value_text)}})},6e4),this.doAdelay().then(function(e){l.getAllDataSetup()})}return a(e,[{key:"doAdelay",value:function(){var e=this;return e.q(function(e,t){setTimeout(function(){return console.log("now waiting"),e(!0)},5e3)})}},{key:"translate",value:function(){"en-US"===this.baseLanguage?localStorage.setItem("baseLanguage","ja-JP"):localStorage.setItem("baseLanguage","en-US")}},{key:"getConfigurationForArea",value:function(e,t,n){var r=n||"id";return _.sortBy(_.where(e,{area:t}),r)}},{key:"getTimeZoneDate",value:function(e,t){if("UTC"===e){var n=e,r=moment().utc().format(),o=moment(r).utc().format("HH:mm"),a=moment(r).utc().format("dddd"),i=moment(r).utc().format("DD MMM YYYY");return{zone:n,zoneDate:r,time:o,day:a,date:i}}var u=moment().tz(t).format(),s=moment(u).tz(t).format("HH:mm"),l=moment(u).tz(t).format("dddd"),c=moment(u).tz(t).format("DD MMM YYYY");return{zone:t,zoneDate:u,time:s,day:l,date:c}}},{key:"getAllDataSetup",value:function(){var e=this,t="ja-JP"===this.baseLanguage;this.service.getDataFromApi("GET","getConfiguration").then(function(n){if(0===n.resultCode){var r=n.response.data;e.loadingMessages=e.getConfigurationForArea(r,"LT","key_text");var o=_.findWhere(n.response.data,{key_text:"dashboard_name"});return e.appHeading=t?o.jpn_value:o.value_text,e.allTimeZones=e.getConfigurationForArea(r,"TZ"),e.timeZones=_.map(e.allTimeZones,function(t){return{name:t.key_text,time:e.getTimeZoneDate(t.key_text,t.value_text)}}),console.log("timezones: ",JSON.stringify(e.timeZones)),e.mainLoadingDivText=t?e.loadingMessages[1].jpn_value:e.loadingMessages[1].value_text,e.configurations=n.response.data,e.showHeaderAndFooter=!0,e.doAdelay()}}).then(function(n){e.mainLoadingDivText=t?e.loadingMessages[2].jpn_value:e.loadingMessages[2].value_text})["catch"](function(e){})}}]),e}();n["default"]=s},{"./../services/mainService.js":4}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./../common/callApi.js"),u=r(i),s=function(){function e(t,n){o(this,e),this.http=t,this.promise=n,this.api=new u["default"](t,n),this.baseUrl="http://localhost:3131/"}return a(e,[{key:"getDataFromApi",value:function(e,t){var n=this,r=this.baseUrl+t;return this.promise(function(o,a){if("GET"===e.toUpperCase())return n.api.get(r).then(function(e){return 0==e.resultCode?o(e):1==e.resultCode?a(e):void 0})["catch"](function(e){return console.log("error occurred - "+t,JSON.stringify(e)),a(e)})})}}]),e}();n["default"]=s},{"./../common/callApi.js":2}]},{},[1]);
//# sourceMappingURL=app.js.map
