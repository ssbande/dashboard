{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app.js","src/scripts/app.js","src/scripts/common/callApi.js","src/scripts/controllers/mainController.js","src/scripts/services/mainService.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_mainController","_mainController2","sb","angular","config","$routeProvider","$locationProvider","html5Mode","controller","$inject","./controllers/mainController.js","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","callApi","$http","$q","this","console","log","http","promises","url","request","headers","_this","resolve","reject","method","data","success","error","_this2","3","_mainService","_mainService2","mainController","$timeout","$window","$interval","underscore","q","timeout","window","baseLanguage","localStorage","getItem","service","mainLoadingDivText","allDataLoaded","me","timeZones","_","map","allTimeZones","tz","name","key_text","time","getTimeZoneDate","value_text","doAdelay","then","delayOver","getAllDataSetup","base","resject","setTimeout","setItem","criteria","orderByKey","sortBy","where","area","timeZone","zone","utcZone","utcFullDate","moment","utc","format","utcTime","utcDay","utcDate","zoneDate","day","date","isJapanese","getDataFromApi","result","resultCode","resultData","response","loadingMessages","getConfigurationForArea","headRow","findWhere","appHeading","jpn_value","JSON","stringify","configurations","showHeaderAndFooter","./../services/mainService.js","4","_callApi","_callApi2","mainService","promise","api","baseUrl","restMethod","action","toUpperCase","get","err","./../common/callApi.js"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _mainController = require('./controllers/mainController.js');\n\nvar _mainController2 = _interopRequireDefault(_mainController);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import detailController from './controller/detailController.js';\n// import utilController from './controller/utilController.js';\n// import SharedService from './service/sharedService.js';\n// import pController from './controller/pController.js';\n// import utilController from './controller/utilController.js';\n// import sharedService from './services/sharedService.js';\n\nvar sb = angular.module('sb', ['underscore', 'ngRoute', 'angularMoment']);\nsb.config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {\n  $locationProvider.html5Mode(true);\n}]);\n\nsb.controller('mainController', _mainController2.default);\n// sb.controller('detailController', detailController);\n// sb.controller('utilController', utilController);\n\n// sb.service('sharedService', SharedService);\n\n_mainController2.default.$inject = ['$http', '$q', '$timeout', '$window', '$interval', '_', 'moment'];\n// detailController.$inject  = ['$http', '$q', '$timeout', '$window', '$interval', '_', 'moment'];\n\n},{\"./controllers/mainController.js\":3}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar callApi = function () {\n  function callApi($http, $q) {\n    _classCallCheck(this, callApi);\n\n    console.log(\"http: \");\n    this.http = $http;\n    this.promises = $q;\n  }\n\n  _createClass(callApi, [{\n    key: \"post\",\n    value: function post(url, request, headers) {\n      var _this = this;\n\n      return this.promises(function (resolve, reject) {\n        _this.http({\n          method: \"POST\",\n          url: url,\n          data: request,\n          headers: headers\n        }).success(function (data) {\n          return resolve(data);\n        }).error(function (error) {\n          return reject(error);\n        });\n      });\n    }\n  }, {\n    key: \"get\",\n    value: function get(url) {\n      var _this2 = this;\n\n      return this.promises(function (resolve, reject) {\n        _this2.http({\n          method: \"GET\",\n          url: url\n        }).success(function (data) {\n          return resolve(data);\n        }).error(function (error) {\n          return reject(error);\n        });\n      });\n    }\n  }]);\n\n  return callApi;\n}();\n\nexports.default = callApi;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mainService = require('./../services/mainService.js');\n\nvar _mainService2 = _interopRequireDefault(_mainService);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar mainController = function () {\n  function mainController($http, $q, $timeout, $window, $interval, underscore) {\n    var _this = this;\n\n    _classCallCheck(this, mainController);\n\n    this.http = $http;\n    this.q = $q;\n    this.timeout = $timeout;\n    this.window = $window;\n\n    this.baseLanguage = localStorage.getItem('baseLanguage') || \"en-US\"; // ja-JP\n    console.log(\"base language: \", this.baseLanguage);\n    this.service = new _mainService2.default($http, $q);\n\n    this.mainLoadingDivText = this.baseLanguage === \"ja-JP\" ? \"取得の設定 ...\" : \"Getting Configurations ...\";\n    this.allDataLoaded = false;\n\n    // Refreshing time every minute for all timezones.\n    var me = this;\n    $interval(function () {\n      me.timeZones = _.map(me.allTimeZones, function (tz) {\n        return {\n          name: tz.key_text,\n          time: me.getTimeZoneDate(tz.key_text, tz.value_text)\n        };\n      });\n    }, 60000);\n\n    // const loadingMessages = [\"Getting Configuration ...\", \"Setting up environment ...\", \"Fetching data ...\", \"Preparing charts ... \", \"Almost done ...\", \"Still Loading. Please wait ...\"];\n    // let tick = 0;\n    // const base = this;\n    // $interval(function () {\n    //   tick++;\n    //   if(tick <= 4 && !base.dataLoaded){\n    //     base.mainLoadingDivText = loadingMessages[tick];\n    //   } else{\n    //     if(!base.dataLoaded){\n    //       base.mainLoadingDivText = loadingMessages[5];\n    //     }\n    //   }\n    // }, 1000);\n    this.doAdelay().then(function (delayOver) {\n      _this.getAllDataSetup();\n    });\n  }\n\n  _createClass(mainController, [{\n    key: 'doAdelay',\n    value: function doAdelay() {\n      var base = this;\n      return base.q(function (resolve, resject) {\n        setTimeout(function () {\n          console.log(\"now waiting\");\n          return resolve(true);\n        }, 5000);\n      });\n    }\n  }, {\n    key: 'translate',\n    value: function translate() {\n      this.baseLanguage === \"en-US\" ? localStorage.setItem('baseLanguage', 'ja-JP') : localStorage.setItem('baseLanguage', 'en-US');\n    }\n  }, {\n    key: 'getConfigurationForArea',\n    value: function getConfigurationForArea(data, criteria, key) {\n      var orderByKey = key || 'id';\n      return _.sortBy(_.where(data, { area: criteria }), orderByKey);\n\n      // if(firstOnly){\n      //   return _.findWhere(data, {[firstOnly.key]: firstOnly.value});\n      // }else{\n      //\n      // }\n    }\n  }, {\n    key: 'getTimeZoneDate',\n    value: function getTimeZoneDate(timeZone, zone) {\n      if (timeZone === 'UTC') {\n        var utcZone = timeZone;\n        var utcFullDate = moment().utc().format();\n        var utcTime = moment(utcFullDate).utc().format(\"HH:mm\");\n        var utcDay = moment(utcFullDate).utc().format(\"dddd\");\n        var utcDate = moment(utcFullDate).utc().format(\"DD MMM YYYY\");\n\n        return {\n          zone: utcZone, zoneDate: utcFullDate, time: utcTime, day: utcDay, date: utcDate\n        };\n      }\n\n      //const zone     = this.constants.getZoneFromTimeZone(timeZone);\n      var zoneDate = moment().tz(zone).format();\n      var time = moment(zoneDate).tz(zone).format(\"HH:mm\");\n      var day = moment(zoneDate).tz(zone).format(\"dddd\");\n      var date = moment(zoneDate).tz(zone).format(\"DD MMM YYYY\");\n\n      return {\n        zone: zone, zoneDate: zoneDate, time: time, day: day, date: date\n      };\n    }\n  }, {\n    key: 'getAllDataSetup',\n    value: function getAllDataSetup() {\n      var _this2 = this;\n\n      var isJapanese = this.baseLanguage === \"ja-JP\";\n      this.service.getDataFromApi(\"GET\", \"getConfiguration\").then(function (result) {\n        if (result.resultCode === 0) {\n          var resultData = result.response.data;\n          _this2.loadingMessages = _this2.getConfigurationForArea(resultData, \"LT\", \"key_text\"); //_.sortBy(_.where(result.response.data, {area: \"LT\"}), 'key_text');\n\n          // Manage the app heading\n          var headRow = _.findWhere(result.response.data, { key_text: \"dashboard_name\" }); // this.getConfigurationForArea(resultData, \"\", \"\", {key: \"key_text\", value: \"dashboard_name\"}); //\n          _this2.appHeading = isJapanese ? headRow.jpn_value : headRow.value_text;\n\n          // Get timezone details\n          _this2.allTimeZones = _this2.getConfigurationForArea(resultData, \"TZ\"); //_.sortBy(_.where(result.response.data, {area: \"TZ\"}), 'id');\n          _this2.timeZones = _.map(_this2.allTimeZones, function (tz) {\n            return {\n              name: tz.key_text,\n              time: _this2.getTimeZoneDate(tz.key_text, tz.value_text)\n            };\n          });\n\n          console.log(\"timezones: \", JSON.stringify(_this2.timeZones));\n          // Chaging the Loading Text as per the language selected.\n          _this2.mainLoadingDivText = isJapanese ? _this2.loadingMessages[1].jpn_value : _this2.loadingMessages[1].value_text;\n\n          // Assign the result and show the header and footer.\n          _this2.configurations = result.response.data;\n          _this2.showHeaderAndFooter = true;\n          return _this2.doAdelay();\n        }\n      }).then(function (delayOver) {\n        _this2.mainLoadingDivText = isJapanese ? _this2.loadingMessages[2].jpn_value : _this2.loadingMessages[2].value_text;\n      }).catch(function (error) {});\n    }\n  }]);\n\n  return mainController;\n}();\n\nexports.default = mainController;\n\n},{\"./../services/mainService.js\":4}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _callApi = require(\"./../common/callApi.js\");\n\nvar _callApi2 = _interopRequireDefault(_callApi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar mainService = function () {\n  function mainService($http, $q) {\n    _classCallCheck(this, mainService);\n\n    this.http = $http;\n    this.promise = $q;\n    this.api = new _callApi2.default($http, $q);\n    this.baseUrl = \"http://localhost:3131/\";\n  }\n\n  _createClass(mainService, [{\n    key: \"getDataFromApi\",\n    value: function getDataFromApi(restMethod, action) {\n      var _this = this;\n\n      var url = this.baseUrl + action;\n      return this.promise(function (resolve, reject) {\n        if (restMethod.toUpperCase() === \"GET\") {\n          return _this.api.get(url).then(function (response) {\n            if (response.resultCode == 0) {\n              return resolve(response);\n            }\n\n            if (response.resultCode == 1) {\n              return reject(response);\n            }\n          }).catch(function (err) {\n            console.log(\"error occurred - \" + action, JSON.stringify(err));\n            return reject(err);\n          });\n        }\n      });\n    }\n  }]);\n\n  return mainService;\n}();\n\nexports.default = mainService;\n\n},{\"./../common/callApi.js\":2}]},{},[1])\n\n","import mainController from './controllers/mainController.js';\r\n// import detailController from './controller/detailController.js';\r\n// import utilController from './controller/utilController.js';\r\n// import SharedService from './service/sharedService.js';\r\n// import pController from './controller/pController.js';\r\n// import utilController from './controller/utilController.js';\r\n// import sharedService from './services/sharedService.js';\r\n\r\nconst sb = angular.module('sb', ['underscore', 'ngRoute', 'angularMoment']);\r\nsb.config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {\r\n  $locationProvider.html5Mode(true);\r\n}]);\r\n\r\nsb.controller('mainController', mainController);\r\n// sb.controller('detailController', detailController);\r\n// sb.controller('utilController', utilController);\r\n\r\n// sb.service('sharedService', SharedService);\r\n\r\nmainController.$inject  = ['$http', '$q', '$timeout', '$window', '$interval', '_', 'moment'];\r\n// detailController.$inject  = ['$http', '$q', '$timeout', '$window', '$interval', '_', 'moment'];\r\n","export default class callApi{\r\n  constructor($http, $q){\r\n    console.log(\"http: \");\r\n    this.http = $http;\r\n    this.promises = $q;\r\n  }\r\n\r\n  post(url, request, headers){\r\n    return this.promises((resolve, reject) => {\r\n      this.http({\r\n        method: \"POST\",\r\n        url   : url,\r\n        data  : request,\r\n        headers: headers\r\n      }).success(function (data) {\r\n        return resolve(data);\r\n      }).error(function(error){\r\n        return reject(error);\r\n      });\r\n    });\r\n  }\r\n\r\n  get(url){\r\n    return this.promises((resolve, reject) => {\r\n      this.http({\r\n        method: \"GET\",\r\n        url   : url\r\n      }).success(function (data) {\r\n        return resolve(data);\r\n      }).error(function(error){\r\n        return reject(error);\r\n      });\r\n    });\r\n  }\r\n}\r\n","import mainService from './../services/mainService.js';\n\nexport default class mainController {\n  constructor($http, $q, $timeout, $window, $interval, underscore) {\n    this.http = $http;\n    this.q = $q;\n    this.timeout = $timeout;\n    this.window = $window;\n\n    this.baseLanguage = localStorage.getItem('baseLanguage') || \"en-US\";  // ja-JP\n    console.log(\"base language: \", this.baseLanguage);\n    this.service = new mainService($http, $q);\n\n    this.mainLoadingDivText = this.baseLanguage === \"ja-JP\" ? \"取得の設定 ...\" : \"Getting Configurations ...\";\n    this.allDataLoaded = false;\n\n    // Refreshing time every minute for all timezones.\n    const me = this;\n    $interval(function () {\n      me.timeZones = _.map(me.allTimeZones, (tz) => {\n        return {\n          name: tz.key_text,\n          time: me.getTimeZoneDate(tz.key_text, tz.value_text)\n        };\n      });\n    }, 60000);\n\n\n\n    // const loadingMessages = [\"Getting Configuration ...\", \"Setting up environment ...\", \"Fetching data ...\", \"Preparing charts ... \", \"Almost done ...\", \"Still Loading. Please wait ...\"];\n    // let tick = 0;\n    // const base = this;\n    // $interval(function () {\n    //   tick++;\n    //   if(tick <= 4 && !base.dataLoaded){\n    //     base.mainLoadingDivText = loadingMessages[tick];\n    //   } else{\n    //     if(!base.dataLoaded){\n    //       base.mainLoadingDivText = loadingMessages[5];\n    //     }\n    //   }\n    // }, 1000);\n    this.doAdelay()\n    .then((delayOver) => {\n      this.getAllDataSetup();\n    });\n  }\n\n  doAdelay(){\n    const base = this;\n    return base.q((resolve, resject) => {\n      setTimeout(function(){\n        console.log(\"now waiting\");\n        return resolve(true);\n      }, 5000);\n    });\n  }\n\n  translate(){\n    this.baseLanguage === \"en-US\" ? localStorage.setItem('baseLanguage', 'ja-JP') : localStorage.setItem('baseLanguage', 'en-US');\n  }\n\n  getConfigurationForArea(data, criteria, key){\n    const orderByKey = key || 'id';\n    return _.sortBy(_.where(data, {area: criteria}), orderByKey);\n\n    // if(firstOnly){\n    //   return _.findWhere(data, {[firstOnly.key]: firstOnly.value});\n    // }else{\n    //\n    // }\n  }\n\n  getTimeZoneDate(timeZone, zone) {\n   if(timeZone === 'UTC'){\n     const utcZone     = timeZone;\n     const utcFullDate = moment().utc().format();\n     const utcTime     = moment(utcFullDate).utc().format(\"HH:mm\");\n     const utcDay      = moment(utcFullDate).utc().format(\"dddd\");\n     const utcDate     = moment(utcFullDate).utc().format(\"DD MMM YYYY\");\n\n     return {\n       zone: utcZone, zoneDate: utcFullDate, time: utcTime, day: utcDay, date: utcDate\n     };\n   }\n\n   //const zone     = this.constants.getZoneFromTimeZone(timeZone);\n   const zoneDate = moment().tz(zone).format();\n   const time     = moment(zoneDate).tz(zone).format(\"HH:mm\");\n   const day      = moment(zoneDate).tz(zone).format(\"dddd\");\n   const date     = moment(zoneDate).tz(zone).format(\"DD MMM YYYY\");\n\n   return {\n     zone, zoneDate, time, day, date\n   };\n }\n\n  getAllDataSetup(){\n    const isJapanese = this.baseLanguage === \"ja-JP\";\n    this.service.getDataFromApi(\"GET\", \"getConfiguration\")\n      .then((result) => {\n        if(result.resultCode === 0){\n          const resultData = result.response.data;\n          this.loadingMessages = this.getConfigurationForArea(resultData, \"LT\", \"key_text\"); //_.sortBy(_.where(result.response.data, {area: \"LT\"}), 'key_text');\n\n          // Manage the app heading\n          const headRow = _.findWhere(result.response.data, {key_text: \"dashboard_name\"}); // this.getConfigurationForArea(resultData, \"\", \"\", {key: \"key_text\", value: \"dashboard_name\"}); //\n          this.appHeading = isJapanese ? headRow.jpn_value : headRow.value_text;\n\n          // Get timezone details\n          this.allTimeZones = this.getConfigurationForArea(resultData, \"TZ\"); //_.sortBy(_.where(result.response.data, {area: \"TZ\"}), 'id');\n          this.timeZones = _.map(this.allTimeZones, (tz) => {\n            return {\n              name: tz.key_text,\n              time: this.getTimeZoneDate(tz.key_text, tz.value_text)\n            };\n          });\n\n          console.log(\"timezones: \", JSON.stringify(this.timeZones));\n          // Chaging the Loading Text as per the language selected.\n          this.mainLoadingDivText = isJapanese ? this.loadingMessages[1].jpn_value : this.loadingMessages[1].value_text;\n\n          // Assign the result and show the header and footer.\n          this.configurations = result.response.data;\n          this.showHeaderAndFooter = true;\n          return this.doAdelay();\n        }\n      })\n      .then((delayOver) => {\n        this.mainLoadingDivText = isJapanese ? this.loadingMessages[2].jpn_value : this.loadingMessages[2].value_text;\n      })\n      .catch((error) => {\n\n      });\n  }\n}\n","import callApi from './../common/callApi.js';\n\nexport default class mainService{\n  constructor($http, $q){\n    this.http = $http;\n    this.promise = $q;\n    this.api = new callApi($http, $q);\n    this.baseUrl = \"http://localhost:3131/\";\n  }\n\n  getDataFromApi(restMethod, action){\n    const url = this.baseUrl + action;\n    return this.promise((resolve, reject) => {\n      if(restMethod.toUpperCase() === \"GET\"){\n        return this.api.get(url)\n            .then((response) => {\n              if(response.resultCode == 0){\n                return resolve(response);\n              }\n\n              if(response.resultCode == 1){\n                return reject(response);\n              }\n            })\n            .catch((err) => {\n              console.log(\"error occurred - \" + action, JSON.stringify(err));\n              return reject(err);\n            });\n      }\n    });\n  }\n}\n"]}